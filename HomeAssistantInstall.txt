Use Raspberry Pi Imager 
-Raspberry Pi OS (other) - Raspian Full (32-bit) or Raspberry Pi OS (64-bit)
-Select setting icon for menu with SSH and WiFi options.  Set Wireless LAN country, Locale options here as well.
Boot Pi with bootable SD card just created
check router for Pi IP address
SSH into Pi

Set date/time - use current values
~sudo date -s '2021-12-29 12:00:00' 
Or 
~sudo apt install ntp
64 bit image already has this maybe??????


~sudo nano /etc/dhcpcd.conf
add IP information as appropriate for your network, such as ...........
interface wlan0
static ip_address=192.168.1.101/24
static routers=192.168.1.1
static domain_name_servers=192.168.1.1 8.8.8.8

SSH into Pi
~sudo raspi-config - options 1, S5, B3 - also option 5 to set locale # maybe be set with the imager
~sudo reboot
~sudo apt install xrdp
~sudo apt update && sudo apt upgrade
~sudo apt autoremove

Fix for XRDP............
sudo nano /etc/X11/xrdp/xorg.conf
Find:
Option "DRMDevice" "/dev/dri/renderD128"
Change to:
#Option "DRMDevice" "/dev/dri/renderD128"
Option "DRMDevice" ""
Save and exit
sudo reboot

Windows RDP should now work.

Utility to check for services that need restart.  To run use "sudo needrestart"
sudo apt install needrestart

Install pre-reqs
~sudo apt-get install jq wget curl avahi-daemon udisks2 libglib2.0-bin network-manager dbus apparmor -y
This may take a long time on the SSH screen, and drop the connection it should be OK


This will keep you MAC from changing and giving a different DHCP address each time there is a reboot.
~sudo nano /etc/NetworkManager/conf.d/100-disable-wifi-mac-randomization.conf
add......
[connection]
wifi.mac-address-randomization=1
[device]
wifi.scan-rand-mac-address=no

~sudo reboot

Install Docker CE from https://docs.docker.com/engine/install/debian/
~curl -fsSL https://get.docker.com -o get-docker.sh
~sudo sh get-docker.sh
~docker --version         to check intall
~sudo usermod -aG docker pi

Install HA agent
32-bit:  
~wget https://github.com/home-assistant/os-agent/releases/download/1.2.2/os-agent_1.2.2_linux_armv7.deb
~sudo dpkg -i os-agent_1.2.2_linux_armv7.deb
OR 64-bit:
wget https://github.com/home-assistant/os-agent/releases/download/1.2.2/os-agent_1.2.2_linux_aarch64.deb
dpkg -i os-agent_1.2.2_linux_aarch64.deb


??? sudo ifconfig eth0 down

Install HA - Possibly - must be hardwire connected to network, not WiFi!  Choose raspberryPi4 (not 64 bit) for this part
~wget https://github.com/home-assistant/supervised-installer/releases/latest/download/homeassistant-supervised.deb
~sudo dpkg -i homeassistant-supervised.deb


~ha jobs options --ignore-conditions healthy

Install bluepy into Python3 (Python 3.9.2 comes with Bullseye as of late 2021)
~sudo apt-get install python3-pip libglib2.0-dev
~sudo pip3 install bluepy

Install paho MQTT client for 
~pip3 install paho-mqtt

Install the following Add-Ins from Home Assistant
MQTT Broker
ESPHome
Influx
Node Red
Grafana

Install raspap for the raspberry pi to function as a wireless ap
~curl -sL https://install.raspap.com | bash

